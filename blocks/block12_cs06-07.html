<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>American History — Block 12 (CS 6–7) Game</title>

<style>
:root{
  --bg:#0b1220; --card:#111a2e; --ink:#e7eefc; --muted:#a8b4cf;
  --accent:#7aa2ff; --good:#2bd576; --bad:#ff5c7a; --warn:#ffd166;
  --border:rgba(255,255,255,.12); --shadow:0 18px 55px rgba(0,0,0,.35);
  --r:18px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:radial-gradient(1000px 650px at 18% 12%, rgba(122,162,255,.18), transparent 60%), var(--bg);
  color:var(--ink);
  min-height:100vh;
  display:flex; align-items:center; justify-content:center;
  padding:18px;
}
.app{
  width:min(980px,100%);
  background:rgba(17,26,46,.9);
  border:1px solid var(--border);
  border-radius:var(--r);
  box-shadow:var(--shadow);
  overflow:hidden;
}
header{
  padding:16px 18px;
  display:flex; justify-content:space-between;
  border-bottom:1px solid var(--border);
}
.title h1{margin:0;font-size:16px}
.title .sub{color:var(--muted);font-size:12px}
.meta{display:flex;gap:10px;flex-wrap:wrap}
.pill{
  border:1px solid var(--border);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
  color:var(--muted);
}
.pill b{color:var(--ink)}
main{padding:18px;display:grid;gap:14px}
.card{
  background:rgba(0,0,0,.22);
  border:1px solid var(--border);
  border-radius:var(--r);
  padding:16px;
}
.grid{
  display:grid;
  gap:10px;
  margin-top:10px;
  grid-template-columns:repeat(2,minmax(0,1fr));
}
@media(max-width:640px){.grid{grid-template-columns:1fr}}
button{
  cursor:pointer;
  border-radius:14px;
  padding:12px;
  font-weight:800;
  border:1px solid rgba(122,162,255,.35);
  background:rgba(122,162,255,.18);
  color:var(--ink);
}
button.secondary{background:rgba(255,255,255,.06);border:1px solid var(--border)}
button.good{background:rgba(43,213,118,.14);border:1px solid rgba(43,213,118,.35)}
button.bad{background:rgba(255,92,122,.14);border:1px solid rgba(255,92,122,.35)}
.hidden{display:none!important}
.bar{height:10px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
.bar>div{height:100%;width:0;background:rgba(43,213,118,.75)}
.hint{
  margin-top:10px;
  padding:10px;
  border-radius:14px;
  background:rgba(255,209,102,.10);
  border:1px solid rgba(255,209,102,.35);
  display:none;
}
pre{
  white-space:pre-wrap;
  background:rgba(0,0,0,.25);
  padding:12px;
  border-radius:14px;
}
</style>
</head>
<body>
<div class="app">
<header>
  <div class="title">
    <h1>American History — Block 12 (CS 6–7)</h1>
    <div class="sub">Constitution Foundations • Early Republic in Action • 100% Required</div>
  </div>
  <div class="meta">
    <div class="pill">Name: <b id="mName">—</b></div>
    <div class="pill">Started: <b id="mStart">—</b></div>
    <div class="pill">Time: <b id="mTime">00:00</b></div>
    <div class="pill">Accuracy: <b id="mAcc">100%</b></div>
  </div>
</header>

<main>

<section id="start" class="card">
  <input id="name" placeholder="Enter your name..." />
  <button id="startBtn">Start</button>
</section>

<section id="game" class="card hidden">
  <div id="kicker"></div>
  <div id="question"></div>
  <div class="bar"><div id="barFill"></div></div>
  <div id="choices" class="grid"></div>
  <div id="hint" class="hint"></div>
  <div id="feedback"></div>
</section>

<section id="done" class="card hidden">
  <h2 id="doneTitle"></h2>
  <div id="doneMsg"></div>
  <button id="copyBtn">Copy Ticket</button>
  <button onclick="location.reload()">Play Again</button>
  <pre id="ticket"></pre>
</section>

</main>
</div>

<script>
/* =============================
   QUESTIONS — CS6 & CS7 (26)
   ============================= */
const QUESTIONS = shuffle([

/* -------- CS6 (Constitution) -------- */
{cs:"CS6",prompt:"Which problem under the Articles of Confederation led directly to the Constitutional Convention?",
choices:["Weak national government unable to tax effectively","Too much executive power","Strong national military","Judicial review abuses"],
answer:"Weak national government unable to tax effectively",
hint:"The Articles lacked taxation power, causing financial instability."},

{cs:"CS6",prompt:"Which principle divides power between national and state governments?",
choices:["Federalism","Judicial activism","Isolationism","Mercantilism"],
answer:"Federalism",
hint:"Federalism means shared powers between levels of government."},

{cs:"CS6",prompt:"Which document begins with 'We the People' to emphasize popular sovereignty?",
choices:["The U.S. Constitution","The Articles of Confederation","The Magna Carta","The Mayflower Compact"],
answer:"The U.S. Constitution",
hint:"The Preamble emphasizes power comes from the people."},

{cs:"CS6",prompt:"The Great Compromise resolved conflict between:",
choices:["Large and small states over representation","North and South over slavery","Britain and France","Farmers and bankers"],
answer:"Large and small states over representation",
hint:"It created a bicameral legislature."},

{cs:"CS6",prompt:"Separation of powers prevents:",
choices:["One branch from controlling the entire government","States from having power","Citizens from voting","The Constitution from being amended"],
answer:"One branch from controlling the entire government",
hint:"Each branch has distinct roles."},

{cs:"CS6",prompt:"Checks and balances allow one branch to:",
choices:["Limit the power of another branch","Ignore elections","Control states directly","Abolish amendments"],
answer:"Limit the power of another branch",
hint:"Example: veto override, judicial review."},

{cs:"CS6",prompt:"Which debate led to the addition of the Bill of Rights?",
choices:["Federalists vs Anti-Federalists","North vs South","Britain vs France","Farmers vs merchants"],
answer:"Federalists vs Anti-Federalists",
hint:"Anti-Federalists demanded protection of liberties."},

{cs:"CS6",prompt:"Cause → effect: Fear of centralized tyranny led to:",
choices:["Separation of powers and federalism","Absolute monarchy","No written constitution","Elimination of elections"],
answer:"Separation of powers and federalism",
hint:"Power was divided to prevent abuse."},

{cs:"CS6",prompt:"Which branch interprets laws?",
choices:["Judicial","Legislative","Executive","State militias"],
answer:"Judicial",
hint:"Courts interpret laws and Constitution."},

{cs:"CS6",prompt:"The Supremacy Clause establishes:",
choices:["Federal law as the supreme law of the land","State law dominance","Military rule","Presidential veto power"],
answer:"Federal law as the supreme law of the land",
hint:"Federal law overrides conflicting state law."},

{cs:"CS6",prompt:"Which compromise addressed counting enslaved persons for representation?",
choices:["Three-Fifths Compromise","Great Compromise","Missouri Compromise","Compromise of 1850"],
answer:"Three-Fifths Compromise",
hint:"It counted enslaved persons as three-fifths."},

{cs:"CS6",prompt:"Ratification of the Constitution required approval by:",
choices:["Nine states","All thirteen states","Congress only","The Supreme Court"],
answer:"Nine states",
hint:"Article VII set the ratification requirement."},

{cs:"CS6",prompt:"Which amendment process reflects flexibility in the Constitution?",
choices:["Formal amendment process","Presidential decree","Judicial vote","State convention ban"],
answer:"Formal amendment process",
hint:"Article V outlines amendment procedures."},

/* -------- CS7 (Early Republic) -------- */

{cs:"CS7",prompt:"Which action established the principle of judicial review?",
choices:["Marbury v. Madison","Louisiana Purchase","War of 1812","Missouri Compromise"],
answer:"Marbury v. Madison",
hint:"Chief Justice Marshall asserted court power to review laws."},

{cs:"CS7",prompt:"The Louisiana Purchase demonstrated:",
choices:["Use of implied powers","Strict constructionism only","Judicial supremacy","Isolationism"],
answer:"Use of implied powers",
hint:"Jefferson stretched constitutional interpretation."},

{cs:"CS7",prompt:"Which event tested federal authority over states?",
choices:["Whiskey Rebellion","Boston Tea Party","Stamp Act","Civil War"],
answer:"Whiskey Rebellion",
hint:"Washington enforced federal tax law."},

{cs:"CS7",prompt:"McCulloch v. Maryland strengthened:",
choices:["Federal power over states","State power over Congress","The Articles of Confederation","Slavery protections"],
answer:"Federal power over states",
hint:"It upheld implied powers and national supremacy."},

{cs:"CS7",prompt:"Which case expanded federal control over interstate commerce?",
choices:["Gibbons v. Ogden","Dred Scott","Plessy v. Ferguson","Brown v. Board"],
answer:"Gibbons v. Ogden",
hint:"It interpreted commerce broadly."},

{cs:"CS7",prompt:"Cause → effect: Washington’s precedent of neutrality influenced:",
choices:["Early foreign policy decisions","The Civil War","Industrialization","The Great Depression"],
answer:"Early foreign policy decisions",
hint:"Neutrality shaped early diplomatic approach."},

{cs:"CS7",prompt:"Political parties first emerged due to disagreement over:",
choices:["Size and power of national government","Civil War strategies","World War alliances","Industrial regulations"],
answer:"Size and power of national government",
hint:"Federalists vs Democratic-Republicans."},

{cs:"CS7",prompt:"The Elastic Clause allows Congress to:",
choices:["Make laws necessary and proper to carry out powers","Ignore state governments","Eliminate courts","Cancel amendments"],
answer:"Make laws necessary and proper to carry out powers",
hint:"Also called Necessary and Proper Clause."},

{cs:"CS7",prompt:"Which action reinforced peaceful transfer of power?",
choices:["Election of 1800","War of 1812","Shays’ Rebellion","XYZ Affair"],
answer:"Election of 1800",
hint:"Transfer from Federalists to Democratic-Republicans."},

{cs:"CS7",prompt:"The Bank of the United States controversy reflected debate over:",
choices:["Strict vs loose interpretation of Constitution","Voting rights","Immigration policy","Civil War strategies"],
answer:"Strict vs loose interpretation of Constitution",
hint:"Hamilton vs Jefferson."},

{cs:"CS7",prompt:"Which early policy aimed to avoid foreign entanglements?",
choices:["Neutrality Proclamation","Monroe Doctrine","Marshall Plan","NATO"],
answer:"Neutrality Proclamation",
hint:"Washington’s 1793 proclamation."},

{cs:"CS7",prompt:"Which best summarizes CS7?",
choices:["Early leaders shaped constitutional government through precedents and court decisions","The Constitution remained unchanged","States controlled all power","Congress ignored the Constitution"],
answer:"Early leaders shaped constitutional government through precedents and court decisions",
hint:"Precedent and interpretation defined early governance."},

{cs:"CS7",prompt:"Which Supreme Court under John Marshall strengthened federal authority?",
choices:["Marshall Court","Warren Court","Burger Court","Roberts Court"],
answer:"Marshall Court",
hint:"Marshall era expanded national power."}

]);

/* =============================
   GAME ENGINE
   ============================= */
const $=s=>document.querySelector(s);
const start=$("#start"),game=$("#game"),done=$("#done");
const nameInput=$("#name"),startBtn=$("#startBtn");
const mName=$("#mName"),mStart=$("#mStart"),mTime=$("#mTime"),mAcc=$("#mAcc");
const qEl=$("#question"),choicesEl=$("#choices"),kicker=$("#kicker");
const barFill=$("#barFill"),hintBox=$("#hint"),feedback=$("#feedback");
const doneTitle=$("#doneTitle"),doneMsg=$("#doneMsg"),ticket=$("#ticket");
const copyBtn=$("#copyBtn");

let state={idx:0,misses:0,attempts:0,startedAt:null,qOrder:[],timer:null};

function shuffledChoices(q){
 const arr=[...q.choices];
 for(let i=arr.length-1;i>0;i--){
  const j=Math.floor(Math.random()*(i+1));
  [arr[i],arr[j]]=[arr[j],arr[i]];
 }
 return arr;
}

function calcAccuracy(){
 if(state.attempts===0) return 100;
 return Math.round(((state.attempts-state.misses)/state.attempts)*100);
}
function updateAcc(){mAcc.textContent=calcAccuracy()+"%";}

startBtn.onclick=()=>{
 if(!nameInput.value.trim()) return alert("Enter name");
 state.startedAt=new Date();
 mName.textContent=nameInput.value;
 mStart.textContent=state.startedAt.toLocaleString();
 state.idx=0;state.misses=0;state.attempts=0;
 state.qOrder=shuffle([...QUESTIONS]);
 start.classList.add("hidden");
 game.classList.remove("hidden");
 startTimer();
 render();
};

function render(){
 if(!state.qOrder[state.idx]) return finish();
 const q=state.qOrder[state.idx];
 kicker.textContent=`${q.cs} — Question ${state.idx+1}/${state.qOrder.length}`;
 qEl.textContent=q.prompt;
 barFill.style.width=((state.idx/state.qOrder.length)*100)+"%";
 hintBox.style.display="none";
 feedback.textContent="Choose best answer.";
 choicesEl.innerHTML="";
 shuffledChoices(q).forEach(c=>{
  const b=document.createElement("button");
  b.textContent=c;
  b.onclick=()=>submit(c);
  choicesEl.appendChild(b);
 });
}

function submit(choice){
 const q=state.qOrder[state.idx];
 state.attempts++;
 if(choice===q.answer){
  feedback.textContent="Correct ✅";
  setTimeout(()=>{state.idx++;updateAcc();render();},300);
 }else{
  state.misses++;
  updateAcc();
  feedback.textContent="Not yet ❌";
  hintBox.style.display="block";
  hintBox.textContent="Hint: "+q.hint;
 }
}

function finish(){
 clearInterval(state.timer);
 game.classList.add("hidden");
 done.classList.remove("hidden");
 const ended=new Date();
 const dur=Math.floor((ended-state.startedAt)/1000);
 if(state.misses>0){
  doneTitle.textContent="Not Passed ❌";
  doneMsg.textContent="Retake for 100%.";
  copyBtn.style.display="none";
  ticket.textContent=`Accuracy: ${calcAccuracy()}%\nMisses: ${state.misses}`;
 }else{
  doneTitle.textContent="Complete ✅";
  doneMsg.textContent="Perfect run achieved.";
  ticket.textContent=JSON.stringify({
   status:"PASSED",
   game:"Block 12 — CS 6–7",
   student:mName.textContent,
   started:mStart.textContent,
   ended:ended.toLocaleString(),
   duration_seconds:dur,
   questions:state.qOrder.length,
   attempts:state.attempts,
   misses:0,
   accuracy:100
  },null,2);
 }
}

copyBtn.onclick=()=>navigator.clipboard.writeText(ticket.textContent);

function startTimer(){
 state.timer=setInterval(()=>{
  const s=Math.floor((new Date()-state.startedAt)/1000);
  mTime.textContent=`${String(Math.floor(s/60)).padStart(2,"0")}:${String(s%60).padStart(2,"0")}`;
 },250);
}

function shuffle(arr){
 for(let i=arr.length-1;i>0;i--){
  const j=Math.floor(Math.random()*(i+1));
  [arr[i],arr[j]]=[arr[j],arr[i]];
 }
 return arr;
}
</script>
</body>
</html>
